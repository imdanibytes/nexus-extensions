{
  "id": "webhook-receiver",
  "display_name": "Webhook Receiver",
  "version": "0.1.0",
  "description": "Receives inbound HTTP webhooks and publishes them as CloudEvents on the Nexus event bus",
  "author": "danibytes",
  "license": "MIT",
  "homepage": "https://github.com/imdanibytes/nexus-webhook-receiver",
  "operations": [
    {
      "name": "get_server_info",
      "description": "Get the webhook server port and base URL",
      "risk_level": "low",
      "input_schema": { "type": "object", "properties": {} }
    },
    {
      "name": "get_recent_deliveries",
      "description": "Get recent webhook deliveries for a specific webhook",
      "risk_level": "low",
      "input_schema": {
        "type": "object",
        "properties": {
          "webhook_id": { "type": "string" }
        },
        "required": ["webhook_id"]
      }
    },
    {
      "name": "list_webhooks",
      "description": "List all registered webhook endpoints with their status, URL, event type, and trigger count.",
      "risk_level": "low",
      "mcp_expose": true,
      "input_schema": {
        "type": "object",
        "properties": {},
        "additionalProperties": false
      }
    },
    {
      "name": "create_webhook",
      "description": "Create a new webhook endpoint. Returns the generated URL that external services (e.g. GitHub) should POST to. The webhook publishes received payloads as CloudEvents on the Nexus event bus.",
      "risk_level": "medium",
      "mcp_expose": true,
      "mcp_description": "Create a new webhook endpoint. Returns the generated URL that external services (e.g. GitHub) should POST to. Supported verification methods: 'none', 'github-hmac' (GitHub HMAC-SHA256), 'standard-webhooks' (Standard Webhooks spec), 'custom-header'. The event_type sets the CloudEvent type prefix for published events (e.g. 'com.github.issues').",
      "input_schema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Human-readable name for the webhook."
          },
          "event_type": {
            "type": "string",
            "description": "CloudEvent type for events published by this webhook (e.g. 'com.github.issues')."
          },
          "verification_method": {
            "type": "string",
            "enum": ["none", "github-hmac", "standard-webhooks", "custom-header"],
            "description": "How to verify incoming webhook signatures. Default: 'none'."
          },
          "verification_secret": {
            "type": "string",
            "description": "Shared secret for signature verification (required for github-hmac and standard-webhooks)."
          }
        },
        "required": ["name", "event_type"],
        "additionalProperties": false
      }
    },
    {
      "name": "update_webhook",
      "description": "Update an existing webhook's name, event type, or verification settings.",
      "risk_level": "medium",
      "mcp_expose": true,
      "input_schema": {
        "type": "object",
        "properties": {
          "webhook_id": {
            "type": "string",
            "description": "The webhook ID to update."
          },
          "name": { "type": "string", "description": "New name." },
          "event_type": { "type": "string", "description": "New CloudEvent type." },
          "verification_method": {
            "type": "string",
            "enum": ["none", "github-hmac", "standard-webhooks", "custom-header"]
          },
          "verification_secret": { "type": "string", "description": "New shared secret." }
        },
        "required": ["webhook_id"],
        "additionalProperties": false
      }
    },
    {
      "name": "delete_webhook",
      "description": "Delete a webhook endpoint. This is permanent â€” the URL will stop accepting requests immediately.",
      "risk_level": "medium",
      "mcp_expose": true,
      "input_schema": {
        "type": "object",
        "properties": {
          "webhook_id": {
            "type": "string",
            "description": "The webhook ID to delete."
          }
        },
        "required": ["webhook_id"],
        "additionalProperties": false
      }
    }
  ],
  "capabilities": [
    { "type": "network_http", "scope": ["localhost"] },
    { "type": "custom", "name": "tcp_listen", "description": "Binds a TCP port on localhost for receiving webhooks" }
  ],
  "author_public_key": "PLACEHOLDER",
  "binaries": {},
  "resources": {
    "webhooks": {
      "label": "Webhooks",
      "description": "Registered webhook endpoints",
      "icon": "webhook",
      "schema": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "x-resource-role": "id" },
          "name": { "type": "string", "x-resource-role": "editable" },
          "event_type": {
            "type": "string",
            "x-resource-role": "editable",
            "description": "CloudEvent type (e.g. com.github.push)"
          },
          "verification_method": {
            "type": "string",
            "enum": ["none", "standard-webhooks", "github-hmac", "custom-header"],
            "x-resource-role": "editable"
          },
          "verification_secret": {
            "type": "string",
            "x-resource-role": "editable",
            "x-display": { "input": "password" }
          },
          "status": {
            "type": "string",
            "enum": ["active", "paused", "error"],
            "x-resource-role": "readonly",
            "x-display": { "variant": "status-indicator" }
          },
          "url": {
            "type": "string",
            "x-resource-role": "readonly",
            "description": "Generated endpoint URL"
          },
          "trigger_count": { "type": "integer", "x-resource-role": "readonly" },
          "last_triggered": {
            "type": "string",
            "format": "date-time",
            "x-resource-role": "readonly",
            "x-display": { "format": "relative-time" }
          }
        },
        "required": ["name", "event_type"]
      },
      "list_view": { "columns": ["name", "event_type", "status", "trigger_count", "last_triggered"] },
      "capabilities": { "create": true, "update": true, "delete": true }
    }
  }
}
